[gd_scene load_steps=8 format=3 uid="uid://ce4lhvyxkehq4"]

[ext_resource type="PackedScene" uid="uid://cr1j4wnqskdb1" path="res://scenes/player.tscn" id="1_nnsk1"]
[ext_resource type="PackedScene" uid="uid://c373l33fx36xe" path="res://scenes/spider.tscn" id="2_rwgxs"]
[ext_resource type="Script" uid="uid://d1hqs513i1l2u" path="res://scripts/wave_manager.gd" id="3_4wyf3"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_nnsk1"]

[sub_resource type="Sky" id="Sky_rwgxs"]
sky_material = SubResource("ProceduralSkyMaterial_nnsk1")

[sub_resource type="Environment" id="Environment_4wyf3"]
background_mode = 2
sky = SubResource("Sky_rwgxs")

[sub_resource type="NavigationMesh" id="NavigationMesh_rwgxs"]
vertices = PackedVector3Array(-29.5, 0.5, -29.5, -29.5, 0.5, 29.5, 29.5, 0.5, 29.5, 29.5, 0.5, -29.5)
polygons = [PackedInt32Array(3, 2, 0), PackedInt32Array(0, 2, 1)]

[node name="World" type="Node3D"]

[node name="Player" parent="." instance=ExtResource("1_nnsk1")]

[node name="Skeleton3D" parent="Player/RootNode/CharacterArmature" index="0"]
bones/5/rotation = Quaternion(-0.0030754982, 2.0523689e-07, 3.1096562e-05, 0.99999535)
bones/7/rotation = Quaternion(-0.010477248, -0.00027515297, 5.142677e-05, 0.99994516)
bones/9/rotation = Quaternion(0.6696294, -0.40615526, -0.3866884, -0.4869357)
bones/10/rotation = Quaternion(-0.12550837, -0.0287746, -0.18443847, 0.9743727)
bones/13/rotation = Quaternion(-0.04048503, -0.03209088, 0.06706863, 0.99641013)
bones/14/rotation = Quaternion(-0.078732856, 0.011666547, 0.025066081, 0.9965123)
bones/17/rotation = Quaternion(-0.084726706, 0.024274318, -0.0051069283, 0.9960955)
bones/18/rotation = Quaternion(-0.11202069, 0.0042305165, -0.019183565, 0.99351174)
bones/21/rotation = Quaternion(-0.06798335, 0.15547724, -0.024544025, 0.9851917)
bones/22/rotation = Quaternion(-0.10735731, 0.035467815, -0.03424198, 0.99299747)
bones/29/rotation = Quaternion(-0.022769239, -0.14056759, 0.08387449, 0.9862492)
bones/30/rotation = Quaternion(-0.15895815, -0.052449048, 0.16239674, 0.9724242)
bones/31/rotation = Quaternion(-0.46687448, 0.8437455, 0.07335829, 0.2544414)
bones/32/rotation = Quaternion(-0.76766217, 0.20509818, -0.051916175, 0.60492504)
bones/41/rotation = Quaternion(-0.59608215, 0.096435644, -0.03094317, 0.7965104)
bones/45/rotation = Quaternion(-0.45606372, -0.08001026, 0.24135771, 0.8528486)
bones/46/rotation = Quaternion(-0.5236515, -0.013140805, 0.2891065, 0.80127025)
bones/50/rotation = Quaternion(-0.5449333, 0.08291521, 0.05024886, 0.8328552)
bones/54/rotation = Quaternion(-0.5357619, 0.020343607, 0.8357616, -0.11852369)
bones/55/rotation = Quaternion(0.18504974, 0.68246335, -0.1850496, 0.68246394)
bones/56/rotation = Quaternion(0.5552037, 0.124605894, 0.80509603, 0.16745947)
bones/57/rotation = Quaternion(0.16566221, -0.6874269, 0.16566208, 0.6874275)

[node name="Head" parent="Player/RootNode/CharacterArmature/Skeleton3D" index="0"]
transform = Transform3D(0.9999846, -0.0023930324, -0.0049715317, -0.0051611857, -0.08711425, -0.99618465, 0.0019508039, 0.9961955, -0.087125316, 3.903022e-05, -0.0009105973, 0.015474087)

[node name="Index4_L" parent="Player/RootNode/CharacterArmature/Skeleton3D" index="1"]
transform = Transform3D(-0.064397626, -0.17521548, 0.9824214, -0.9979039, 0.017507818, -0.062289894, -0.0062857824, -0.9843742, -0.1759758, 0.0026720553, -0.00061838434, 0.007993128)

[node name="Middle4_L" parent="Player/RootNode/CharacterArmature/Skeleton3D" index="2"]
transform = Transform3D(-0.063914515, -0.23802523, 0.9691533, -0.99716866, -0.023298154, -0.0714841, 0.03959467, -0.97097963, -0.2358625, 0.002723604, -0.0003248399, 0.007812937)

[node name="Ring4_L" parent="Player/RootNode/CharacterArmature/Skeleton3D" index="3"]
transform = Transform3D(-0.3277567, -0.3504163, 0.87737274, -0.93926173, 0.22091803, -0.26264328, -0.10179303, -0.9101667, -0.40154034, 0.0026779873, 7.687613e-05, 0.008003133)

[node name="Pinky4_L" parent="Player/RootNode/CharacterArmature/Skeleton3D" index="4"]
transform = Transform3D(-0.04176466, -0.5102049, 0.8590378, -0.9938625, 0.10935868, 0.016631596, -0.102428555, -0.85307187, -0.5116415, 0.002616488, 0.0002217766, 0.008244808)

[node name="Thumb3_L" parent="Player/RootNode/CharacterArmature/Skeleton3D" index="5"]
transform = Transform3D(-0.17085057, -0.2769975, 0.9455591, -0.9706567, -0.11749674, -0.20980564, 0.16921598, -0.95365953, -0.24879523, 0.0025067355, -0.001047461, 0.008910585)

[node name="Index4_R" parent="Player/RootNode/CharacterArmature/Skeleton3D" index="6"]
transform = Transform3D(-0.069288805, 0.996423, -0.04836315, -0.45033395, -0.07450052, -0.8897452, -0.8901671, -0.039870128, 0.45388573, -0.00072727265, -0.0068303235, 0.015334765)

[node name="Middle4_R" parent="Player/RootNode/CharacterArmature/Skeleton3D" index="7"]
transform = Transform3D(-0.2982684, 0.18644828, 0.93609416, -0.206799, 0.94481564, -0.25407803, -0.93180984, -0.2693671, -0.24325183, -0.0004081031, -0.006743752, 0.014944689)

[node name="Ring4_R" parent="Player/RootNode/CharacterArmature/Skeleton3D" index="8"]
transform = Transform3D(0.36185354, 0.50049037, 0.7864929, -0.4101603, 0.8430912, -0.34779847, -0.83715606, -0.19673654, 0.51035696, -0.0005069901, -0.006760387, 0.014727445)

[node name="Pinky4_R" parent="Player/RootNode/CharacterArmature/Skeleton3D" index="9"]
transform = Transform3D(-0.0932154, 0.8831621, 0.45971176, -0.17656547, 0.43974045, -0.8805971, -0.9798648, -0.16325486, 0.11494528, -0.00065973017, -0.006728118, 0.014492054)

[node name="Thumb3_R" parent="Player/RootNode/CharacterArmature/Skeleton3D" index="10"]
transform = Transform3D(-0.9087117, 0.07977967, -0.4097284, 0.021844186, -0.97113127, -0.23753896, -0.41685116, -0.22480498, 0.8807368, -0.00034518522, -0.005911407, 0.015012841)

[node name="LowerLeg_L" parent="Player/RootNode/CharacterArmature/Skeleton3D" index="11"]
transform = Transform3D(0.6058394, -0.1857627, -0.773583, 0.79009956, 0.254155, 0.55777615, 0.09299357, -0.94915545, 0.3007561, 0.002154633, -0.00015052158, 0.0050724633)

[node name="LowerLeg_R" parent="Player/RootNode/CharacterArmature/Skeleton3D" index="12"]
transform = Transform3D(0.993226, 0.008520008, -0.11565866, 0.11503464, 0.05395727, 0.99189454, 0.014691152, -0.9985066, 0.052612823, -0.00072651217, -0.0027327524, 0.0053245216)

[node name="HandAttachement" parent="Player/RootNode/CharacterArmature/Skeleton3D" index="21"]
transform = Transform3D(-0.21423931, 0.123428956, -0.96895105, -0.25966552, -0.963486, -0.06531958, -0.9416342, 0.23760933, 0.23846735, -0.0010237133, -0.0048560826, 0.014574228)

[node name="HeadAttachment" parent="Player/RootNode/CharacterArmature/Skeleton3D" index="22"]
transform = Transform3D(0.9999846, -0.0023930324, -0.0049715317, -0.0051611857, -0.08711425, -0.99618465, 0.0019508039, 0.9961955, -0.087125316, 3.903022e-05, -0.0009105973, 0.015474087)

[node name="HipAttachement" parent="Player/RootNode/CharacterArmature/Skeleton3D" index="23"]
transform = Transform3D(0.099081874, 0.060269833, 0.9932258, -0.9075872, -0.40379623, 0.115035385, 0.408005, -0.912861, 0.014690823, -0.000987468, -0.0009843983, 0.009277021)

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_4wyf3")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -0.8660254, 0.50000006, 0, -0.50000006, -0.8660254, 0, 0, 0)

[node name="Spider" parent="." node_paths=PackedStringArray("player_target") instance=ExtResource("2_rwgxs")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -6.990574)
mass = 2.0
angular_damp = 0.3
player_target = NodePath("../Player")

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_rwgxs")

[node name="CSGBox3D" type="CSGBox3D" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.5, 0)
use_collision = true
size = Vector3(60, 1, 60)

[node name="WaveManager" type="Node3D" parent="." node_paths=PackedStringArray("player_target")]
script = ExtResource("3_4wyf3")
player_target = NodePath("../Player")

[node name="Timer" type="Timer" parent="WaveManager"]
autostart = true

[connection signal="timeout" from="WaveManager/Timer" to="WaveManager" method="_on_timer_timeout"]

[editable path="Player"]
[editable path="Player/RootNode/CharacterArmature/Skeleton3D/HandAttachement/HandContainer/pistolContainer/Pistol"]
[editable path="Spider"]
[editable path="Spider/SpiderModel"]
